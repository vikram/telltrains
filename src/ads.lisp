(in-package :com.sondesh.database)

(defun top-of-results-page ()
  (with-html-output (*standard-output*)
    (:div :id "bottomads" :style "width: 728px; height: 90px; position: relative;"
	  (:script :type "text/javascript"
		   "<!--
                   google_ad_client = 'pub-0896530444245941';
                   //top
                   google_ad_slot = '2904488691';
                   google_ad_width = 728;
                   google_ad_height = 90;
                   //-->")
	  (:script :type "text/javascript"
		   :src "http://pagead2.googlesyndication.com/pagead/show_ads.js"))))

(defun bottom-of-results-page ()
  (with-html-output (*standard-output*)
    (:div :id "bottomads" :style "width: 728px; height: 90px; position: relative;"
	  (:script :type "text/javascript"
            "<!--
            google_ad_client = 'pub-0896530444245941';
            //results-bottom
            google_ad_slot = '6736627293';
            google_ad_width = 728;
            google_ad_height = 90;
            //-->")
	  (:script :type "text/javascript"
		   :src "http://pagead2.googlesyndication.com/pagead/show_ads.js"))))

(defun left-side-of-timetable-page ()
  (with-html-output (*standard-output*)
    (:div :id "sideads" :style "width: 120px; height: 600px; float: left; top:100px; left: 680px;"
	  (:script :type "text/javascript"
"<!--
google_ad_client = 'pub-0896530444245941';
//120x600, created 13/11/07
google_ad_slot = '9857024137';
google_ad_width = 120;
google_ad_height = 600;
//-->")
	  (:script :type "text/javascript"
		   :src "http://pagead2.googlesyndication.com/pagead/show_ads.js"))))

(defun right-side-of-timetable-page ()
  (with-html-output (*standard-output*)
    (:div :id "sideads" :style "width: 120px; height: 600px; float: right; top:100px; left: 680px;"
	  (:script :type "text/javascript"
		   "<!--
                    google_ad_client = 'pub-0896530444245941';
                    //side
                    google_ad_slot = '9149082355';
                    google_ad_width = 120;
                    google_ad_height = 600;
                    //-->")
	  (:script :type "text/javascript"
		   :src "http://pagead2.googlesyndication.com/pagead/show_ads.js"))))

(defun top-timetable-page ()
  (with-html-output (*standard-output*)
    (:div :id "topads" :style "width: 728px; height: 90px; position: relative;"
	  (:script :type "text/javascript"
		   "<!--
                    google_ad_client = 'pub-0896530444245941';
                    //728x90, created 13/11/07
                    google_ad_slot = '4843276853';
                    google_ad_width = 728;
                    google_ad_height = 90;
                    //-->")
	  (:script :type "text/javascript"
		   :src "http://pagead2.googlesyndication.com/pagead/show_ads.js"))))

(defun side-of-timetable-page ()
  (with-html-output (*standard-output*)
    (:div :id "sideads" :style "width: 120px; height: 600px; float: left; top:100px; left: 680px;"
	  (:script :type "text/javascript"
		   "<!--
                     google_ad_client = 'pub-0896530444245941';
                     //side
                     google_ad_slot = '9149082355';
                     google_ad_width = 120;
                     google_ad_height = 600;
                     //-->")
         (:script :type "text/javascript"
                  :src "http://pagead2.googlesyndication.com/pagead/show_ads.js"))))

(defun tradedoubler-direct-link ()
  (with-html-output (*standard-output*)
    (:a :href "http://clkuk.tradedoubler.com/click?p=3447&a=1404592&g=27260"
	:onclick (format nil "javascript:urchinTracker(\"~A\");" directtrainline)
	:rel "nofollow"
	:title "Book tickets through thetrainline"
	(fmt "~A" "Book tickets through the trainline"))))

(defun tradedoubler-deep-link (from to day month hour minute)
  (with-html-output (*standard-output*)
    (:a :class "journeylinks"
	:rel "nofollow"
	:href (tradedoubler-url from to day month hour minute)
	:onclick (format nil "javascript:urchinTracker(\"smalldeeptradedouble\~A\~A\");" 
			 from
			 to)
	:title "Check Availability"
	:target "_blank"
	(fmt "~A" "Check Availability")
	(:img :src "http://impgb.tradedoubler.com/imp?type(inv)g(27255)a(1404592)"))))

(defun tradedoubler-url (from to day month hour minute)
  (progn
    (if (> minute 43)
	(progn
	  (setf minute 00)
	  (incf hour)	
	  (when (> hour 23)
	    (setf hour 00)
	    (incf day)))
	(progn
	  (when (and (>= minute 28) (< minute 43))
	    (setf minute 45))
	  (when (and (>= minute 13) (< minute 28))
	    (setf minute 30))
	  (when (and (>= minute 0) (< minute 13))
	    (setf minute 15))))
    (format nil "http://clkuk.tradedoubler.com/click?p(3447)a(1404592)g(27255)url(http://www.thetrainline.com/Time_Table/Home_Validate_Timetable.asp?0=~A&1=~A&11=~A%2F~A&outHourField=~A&outMinuteField=~2,'0d&14=&retHourField=&retMinuteField=&Proceed.x=134&Proceed.y=22)"
	  from to day month hour minute)))

(defparameter *hotels*
  '((1634542	"CHRISTCHURCH")
    (1637469	"Grouville")
    (1634677	"Brighton and Hove")
    (1636904	"BURTON ON TRENT")
    (1636917	"Donington")
    (1635773	"Dudley")
    (1634261	"Fort William")
    (1634344	"Inverness")
    (1634263	"Isle of Mull")
    (1636914	"Knightsbridge")
    (551393	"Louth")
    (553190	"Madeley")
    (549452	"Morley")
    (552373	"Peterborough")
    (1636276	"Rotherwick")
    (1633881	"Shrewsbury")
    (1633886	"Southend On Sea")
    (1636278	"St Andrews")
    (1636341	"St Brelade")
    (1635001	"Stansted")
    (554942	"Stockport")
    (1636388	"Stoke Poges")
    (546492	"Stratford-Upon-Avon")
    (1634690	"Teesside International Airport")
    (1633885	"Telford")
    (1636309	"Tongwynlais")
    (544117	"Ware")
    (1635772	"Watford")
    (1636302	"West Drayton")
    (1633887	"Westcliff On Sea")
    (1634498	"Windsor")
    (547637	"York")
    (552389	"Aberdeen")
    (557069	"Aberfeldy")
    (547209	"Abertillery")
    (553653	"Abingdon")
    (555529	"Acton")
    (557702	"Allesley")
    (554650	"Alnwick")
    (554182	"Alton")
    (552279	"Altrincham")
    (554487	"Ambleside")
    (545465	"Amersham")
    (554734	"Amesbury")
    (550019	"Andover")
    (555010	"Annan")
    (558171	"Antrim")
    (543964	"Appleby Magna")
    (551912	"Arundel")
    (556394	"Ascot")
    (547618	"Ashby de la Zouch")
    (552378	"Ashford")
    (548666	"Auchterarder")
    (547596	"Aviemore")
    (556802	"Aylesbury")
    (546985	"Ayr")
    (550717	"Bagshot")
  (552219	"Baldock")
    (555786	"Ballater")
  (557115	"Banbury")
    (550394	"Banff")
    (554930	"Bangor")
  (549735	"Barnsley")
  (553978	"Barnstaple")
  (555436	"Barton Stacey")
  (557884	"Basildon")
  (549597	"Basingstoke")
  (550392	"Bath")
  (549543	"Bathgate")
  (557624	"Battle")
  (554184	"Bedale")
  (553396	"Bedford")
  (555063	"Belfast")
  (555179	"Belper")
  (557885	"Bentley")
  (555062	"Beverley")
  (547675	"Bexley")
  (545187	"Bideford")
  (555866	"Biggar")
  (549182	"Billingshurst")
  (546234	"Birkenhead")
  (554288	"Birmingham")
  (550301	"Birtley")
  (545856	"Blackpool")
  (544576	"Bloomsbury")
  (558279	"Blyth")
  (558199	"Bolney")
  (557967	"Bolton")
  (546461	"Bracknell")
  (555737	"Bradford")
  (545715	"Bradford on Avon")
  (554055	"Braintree")
  (554115	"Brentwood")
  (554806	"Bridgend")
  (547102	"Bridgwater")
  (549264	"Brierley Hill")
  (556383	"Brighton")
  (550829	"Bristol")
  (549796	"Broadway")
  (555749	"Bromsgrove")
  (545502	"Bromyard")
  (555867	"Broxted")
  (555720	"Buckingham")
  (557198	"Bulkington")
  (551374	"Burford")
  (558589	"Burnley")
  (555384	"Bury")
  (545909	"Bury Saint Edmunds")
  (547581	"Callander")
  (557833	"Camberley")
  (549690	"Campbeltown")
  (558169	"Cannock")
  (545033	"Canterbury")
  (549947	"Cardiff")
  (546703	"Carlisle")
  (548102	"Carrickfergus")
  (550133	"Castle Combe")
  (556999	"Chatham")
  (553878	"Cheadle")
  (551560	"Chelmsford")
  (556731	"Cheltenham")
  (548202	"Chepstow")
  (544531	"Chester")
  (554330	"Chesterfield")
  (545131	"Chichester")
  (550617	"Chingford")
  (558318	"Chippenham")
  (553428	"Chipping Campden")
  (553100	"Church Stretton")
  (553533	"Cirencester")
  (554558	"Clitheroe")
  (556083	"Clydebank")
  (543899	"Colchester")
  (554440	"Corby")
  (547050	"Coventry")
  (546034	"Craigellachie")
  (557581	"Crawley")
  (553678	"Crewe")
  (551699	"Crick")
  (552808	"Crieff")
  (554641	"Croydon")
  (554160	"Cuckfield")
  (549600	"Darlington")
  (546607	"Dartmouth")
  (548161	"Daventry")
  (549819	"Derby")
  (547884	"Diss")
  (551823	"Doncaster")
  (554968	"Dorchester")
  (547785	"Dorking")
  (548263	"Dornoch")
  (546254	"Dover")
  (552376	"Droitwich")
  (553872	"Dudley")
  (556774	"Dumbarton")
  (548855	"Dundee")
  (557677	"Dunfermline")
  (548063	"Dunkeld")
  (547559	"Dunstable")
  (557431	"Durham")
  (556995	"East Kilbride")
  (556745	"Eastbourne")
  (549784	"Ebberston")
  (554344	"Edinburgh")
  (547759	"Egham")
  (551914	"Ellesmere Port")
  (550665	"Elstree")
  (555919	"Ely")
  (553504	"Emsworth")
  (550768	"Enfield")
  (554741	"Epping")
  (550314	"Evanton")
  (557402	"Evesham")
  (552990	"Exeter")
  (552157	"Eye")
  (557823	"Falmouth")
  (554626	"Farnborough")
  (557462	"Farnham")
  (554981	"Faversham")
  (557941	"Finedon")
  (552523	"Flitwick")
  (549953	"Folkestone")
  (552986	"Forres")
  (544026	"Garve")
  (552076	"Gatwick")
  (554489	"Gillingham")
  (546242	"Glasgow")
  (544045	"Glenfarg")
  (545774	"Glenrothes")
  (545567	"Gourock")
  (549916	"Grantham")
  (556057	"Grantown on Spey")
  (551307	"Grasmere")
  (554706	"Great Dunmow")
  (555400	"Great Malvern")
  (549402	"Great Yarmouth")
  (557966	"Greenock")
  (544210	"Grimsby")
  (547445	"Guildford")
  (550076	"Halifax")
  (551160	"Halkyn")
  (544579	"Hammersmith")
  (556552	"Harlow")
  (550779	"Harpenden")
  (554883	"Harrogate")
  (546772	"Harrow")
  (546896	"Hartlepool")
  (553391	"Hastings")
  (558333	"Havant")
  (555301	"Hawkshead")
  (545712	"Haydock")
  (555980	"Hayes")
  (551501	"Headington")
  (551538	"Heathrow")
  (554952	"Hebden Bridge")
  (551808	"Hellesdon")
  (544248	"Hellingly")
  (548661	"Helmsley")
  (550011	"Hereford")
  (548290	"Heston")
  (553683	"Heywood")
  (547036	"High Wycombe")
  (557543	"Highlands & Islands")
  (548023	"Hinxworth")
  (557437	"Holyhead")
  (554870	"Horley, Surrey")
  (547322	"Hornchurch")
  (543948	"Horsham")
  (546455	"Hounslow")
  (550275	"Hove")
  (545581	"Huddersfield")
  (552552	"Hythe")
  (551832	"Ilchester")
  (548704	"Ilford")
  (545635	"Ilkeston")
  (558010	"Innerleithen")
  (556661	"Inveraray")
  (557493	"Ipswich")
  (549821	"Irvine")
  (557538	"Isleworth")
  (557504	"Kendal")
  (556232	"Kenilworth")
  (553118	"Kenmore")
  (554129	"Kent")
  (552565	"Keresley")
  (551092	"Keswick")
  (553464	"Kettering")
  (557171	"Kidderminster")
  (555381	"Kilmarnock")
  (547052	"Kings Lynn")
  (555243	"Kingsbridge")
  (557004	"Kingston")
  (548857	"Kinross")
  (549939	"Kirkcaldy")
  (546408	"Knighton")
  (544385	"Knottingley")
  (557991	"Knowsley")
  (544323	"Knutsford")
  (552520	"Kyleakin")
  (1634621	"Lake District")
  (545693	"Lancaster")
  (551764	"Lavenham")
  (547021	"Leeds")
  (545628	"Leicester")
  (556477	"Leighton Buzzard")
  (557129	"Leith")
  (555811	"Lewes")
  (544362	"Lichfield")
  (557735	"Lifton")
  (546011	"Lincoln")
  (546724	"Little Sutton")
  (547662	"Liverpool")
  (549116	"Livingston")
  (551395	"Llangefni")
  (556828	"Llangollen")
  (552341	"Lockerbie")
  (555588	"Lolworth")
  (555260	"Lower Slaughter")
  (548101	"Ludlow")
  (548471	"Luton")
    (551762	"Lybster")
    (556068	"Lymington")
    (551971	"Lyndhurst")
    (556432	"Machynlleth")
    (556839	"Maidenhead")
    (545985	"Maidstone")
    (551675	"Maldon")
    (544578	"Manchester")
    (550670	"Margate")
    (548299	"Market Bosworth")
    (556428	"Market Deeping")
    (553574	"Market Harborough")
    (558154	"Markfield")
    (556632	"Marlow")
    (551225	"Marston Moretaine")
    (553602	"Merthyr Tydfil")
    (557831	"Middlesbrough")
    (558595	"Middlewich")
    (551592	"Midhurst")
    (555263	"Milton Keynes")
    (544181	"Moffat")
    (558482	"Mold")
    (556989	"Morden")
    (553096	"Morpeth")
    (549564	"Motherwell")
    (547223	"Nantwich")
    (544152	"Needham Market")
    (553499	"Newbury")
    (550328	"Newcastle upon Tyne")
    (557019	"Newport")
    (552142	"Newport Pagnell")
    (557178	"Newquay")
    (557592	"Newton Stewart")
  (555836	"North Petherton")
  (553101	"Northampton")
  (545666	"Northwich")
  (557100	"Northwold")
  (554543	"Norwich")
  (551848	"Nottingham")
  (550762	"Nuneaton")
  (546925	"Oban")
  (544549	"Okehampton")
  (547658	"Oldmeldrum")
  (551789	"Oswestry")
  (548933	"Otterburn")
  (550823	"Oxford")
  (546996	"Padstow")
  (546915	"Painswick")
  (552796	"Peebles")
  (555602	"Pembroke Dock")
  (558436	"Pencoed")
  (550686	"Penicuik")
  (557283	"Penkridge")
  (555413	"Penrith")
  (547692	"Perth")
  (548734	"Peterhead")
  (546057	"Pitlochry")
  (558262	"Plymouth")
  (548901	"Pontefract")
  (550623	"Pontypool")
  (548288	"Portrush")
  (556965	"Portsmouth")
  (551643	"Potters Bar")
  (558098	"Preston")
  (555787	"Ramsgate")
  (548175	"Reading")
  (557986	"Redditch")
  (556756	"Redhill")
  (544687	"Reigate")
  (556064	"Renfrew")
  (553331	"Richmond")
  (554854	"Ripley")
  (544220	"Rochdale")
  (552614	"Rollesby")
  (549734	"Romsey")
  (555178	"Ross on Wye")
  (547855	"Rotherham")
  (545576	"Rugby")
  (546848	"Rugeley")
  (557323	"Runcorn")
  (558527	"Rushden")
  (548014	"Rustington")
  (550109	"Salisbury")
  (548187	"Saltash")
  (553506	"Sanderstead")
  (556685	"Sevenoaks")
  (558349	"Shap")
  (544840	"Sheffield")
  (548637	"Shepperton")
  (552613	"Sherborne")
  (558072	"Shipton")
  (555288	"Skipton")
  (552245	"Sleaford")
  (556124	"Slough")
  (552933	"Solihull")
  (552232	"South Cave")
  (553201	"South Kensington")
  (544494	"South Mimms")
  (544629	"South Normanton")
  (548094	"South Shields")
  (546658	"Southampton")
  (549904	"Southport")
  (551519	"Spalding")
  (1636486	"St Albans")
  (558129	"Stafford")
  (557616	"Staines")
  (557948	"Stainton")
  (552347	"Stevenage")
  (545754	"Stirling")
  (551364	"Stockton")
  (552946	"Stoke on Trent")
  (550821	"Stoke Poges")
  (552966	"Stone")
  (557648	"Stonehouse")
  (544470	"Stow on the Wold")
  (544398	"Stowmarket")
  (550150	"Strathpeffer")
  (554651	"Stroud")
  (548556	"Sturminster Newton")
  (547235	"Swansea")
  (546421	"Swavesey")
  (551087	"Swindon")
  (544254	"Tamworth")
  (556763	"Taplow")
  (553330	"Taunton")
  (554249	"Tetbury")
  (544842	"Tewkesbury")
  (553196	"Thrapston")
  (549207	"Thurso")
  (555321	"Tiverton")
  (558499	"Toddington")
  (551237	"Tonbridge")
  (544769	"Torquay")
  (546611	"Uckfield")
  (544735	"Uppingham")
  (545684	"Uttoxeter")
  (547310	"Wakefield")
  (556341	"Wallingford")
  (556464	"Warminster")
  (556046	"Warrington")
  (555885	"Warwick")
  (557536	"Washington")
  (548329	"Wellingborough")
  (554953	"Wetherby")
  (546481	"Weybridge")
  (552167	"Wheatley")
  (552628	"Wick")
  (552861	"Widnes")
  (550789	"Wigan")
  (549637	"Winchester")
  (544827	"Windermere")
  (553544	"Woburn")
  (555346	"Wokingham")
  (544193	"Wolverhampton")
  (550249	"Woodstock")
  (544259	"Woolacombe")
  (549576	"Worksop")
  (554269	"Worthing")
  (547628	"Wotton under Edge")
  (545969	"Wrexham")
  (556954	"Yarm")
  (548814	"Yarmouth")
  (544256	"Bournemouth")
  (547939	"Poole")
  (548960	"Seaham")
  (549499	"London")
  (549742	"New Milton")
  (1635598	"Ballygally")
  (1635597	"Antrim")
  (1634763	"Inverurie")
  (1634730	"DARWEN")
  (1636456	"Hatfield")
  (1635722	"BILLESLEY")
  (1636497	"Sutton Coldfield")
  (1636861	"West Bromwich")
  (1635907	"Bradford (Nr Leeds)")
  (1635835	"Wareham")
  (1637267	"Bromley")
  (1634757	"Axbridge")
  (1637100	"Weston-Super-Mare")
  (1634623	"Londonderry")
  (1635932	"Hensol")
  (1637389	"Ledsham")
  (1636179	"Clacton On Sea")
  (1637045	"Coulsdon")
  (1634772	"Folkestone")
  (1635984	"Dartford")
  (1636795	"Matlock Bath")
  (1637119	"Yoxall")
  (1636510	"Newton Aycliffe")
  (1636158	"Scotch Corner")
  (1635775	"Retford")
  (1636175	"Himley")
  (1636495	"Musselburgh")
  (1636494	"Old Craighall")
  (1637543	"Cambridge")
  (1637544	"Newmarket")
  (1636922	"Horns Cross")
  (1635378	"Aberfoyle")
  (1634842	"Grangemouth")
  (1635845	"Gloucester")
  (1636437	"Upper Slaughter")
  (1635681	"Guernsey")
  (1636216	"St Peter Port")
  (1635767	"Hull")
  (1635749	"Isle of Man")
  (1635240	"Contin")
  (1636261	"Torridon")
  (1635531	"Jersey")
  (1636384	"Markinch")
  (1636172	"Bowness On Windermere")
  (1636507	"Hinckley")
  (1635902	"Ullesthorpe")
  (1635981	"Audenshaw")
  (1636144	"Rosebank")
  (1635727	"Boldon Colliery")
  (1635768	"Gateshead")
  (1634753	"Deddington")
  (1634909	"Renfrew")
  (1634795	"Boston")
  (1635963	"Leyland")
  (1634492	"Newton Abbot")
  (1636275	"Hook, 27")
  (1636447	"Forest Row")
  (1636609	"Redhill")
  (1636473	"Turners Hill")
  (1637078	"Buxton")
  (1637081	"Disley")
  (1636014	"Broomsgrove")
  (1635769	"Sunderland")
  (1637270	"Langford Budville")
  (1637282	"Wellington")
  (1634898	"Tunbridge Wells")
  (1637079	"Great Broughton")
  (1635919	"Greenford")
  (1636174	"Cronton")
  (1636270	"Daresbury")
  (1635771	"Watford")
  (1635806	"Castleford")
  (1635770	"Worcester")
  (1636481	"Walsall")
  (1635774	"Scarborough")
  (1637088	"Thirsk")
  (1635973	"Shetland")))

(defun hotel-url (place)
  (with-html-output (*standard-output*)
    (:script :type "text/javascript"
	     (format
	      nil
	      "var uri = 'http://impgb.tradedoubler.com/imp?type(js)g(~A)a(1404592)' + new String (Math.random()).substring (2, 11);
               document.write('<sc'+'ript type=\"text/javascript\" src=\"'+uri+'\" charset=\"ISO-8859-1\"></sc'+'ript>');" place))))

